# Based on http://www.djangosnippets.org/snippets/998/ and http://www.djangosnippets.org/snippets/259/